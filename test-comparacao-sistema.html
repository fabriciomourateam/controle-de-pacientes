<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üîç Teste: Sistema de Compara√ß√£o Antes/Depois</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #e2e8f0;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .status-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .status-card h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    .status-icon {
      font-size: 1.5rem;
      min-width: 30px;
      text-align: center;
    }

    .status-text {
      flex: 1;
    }

    .status-label {
      font-weight: 600;
      color: #cbd5e1;
      margin-bottom: 0.25rem;
    }

    .status-value {
      color: #94a3b8;
      font-size: 0.875rem;
    }

    .success {
      color: #10b981;
    }

    .error {
      color: #ef4444;
    }

    .warning {
      color: #f59e0b;
    }

    .info {
      color: #3b82f6;
    }

    .button {
      background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .button:hover {
      transform: translateY(-2px);
    }

    .button:active {
      transform: translateY(0);
    }

    .code-block {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
    }

    .steps {
      list-style: none;
      counter-reset: step-counter;
    }

    .steps li {
      counter-increment: step-counter;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      margin-bottom: 0.75rem;
      position: relative;
      padding-left: 3.5rem;
    }

    .steps li::before {
      content: counter(step-counter);
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
      color: white;
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .alert {
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
      border-left: 4px solid;
    }

    .alert-success {
      background: rgba(16, 185, 129, 0.1);
      border-color: #10b981;
      color: #10b981;
    }

    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      border-color: #ef4444;
      color: #ef4444;
    }

    .alert-warning {
      background: rgba(245, 158, 11, 0.1);
      border-color: #f59e0b;
      color: #f59e0b;
    }

    .alert-info {
      background: rgba(59, 130, 246, 0.1);
      border-color: #3b82f6;
      color: #3b82f6;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîç Teste: Sistema de Compara√ß√£o Antes/Depois</h1>
    <p style="margin-bottom: 2rem; color: #94a3b8;">
      Este teste verifica se o sistema est√° funcionando corretamente
    </p>

    <!-- Status do Sistema -->
    <div class="status-card">
      <h2>üìä Status do Sistema</h2>
      <div id="system-status">
        <div class="status-item">
          <div class="status-icon">‚è≥</div>
          <div class="status-text">
            <div class="status-label">Carregando...</div>
            <div class="status-value">Aguarde enquanto verificamos o sistema</div>
          </div>
        </div>
      </div>
    </div>

    <!-- A√ß√µes R√°pidas -->
    <div class="status-card">
      <h2>üöÄ A√ß√µes R√°pidas</h2>
      <button class="button" onclick="runDiagnostic()">üîç Executar Diagn√≥stico</button>
      <button class="button" onclick="openPrivatePortal()">üîê Abrir Portal Privado</button>
      <button class="button" onclick="openPublicPortal()">üåê Abrir Portal P√∫blico</button>
      <button class="button" onclick="checkDatabase()">üíæ Verificar Banco de Dados</button>
    </div>

    <!-- Instru√ß√µes -->
    <div class="status-card">
      <h2>üìã Como Criar a Compara√ß√£o</h2>
      <ol class="steps">
        <li>
          <strong>Acesse o Portal Privado</strong><br>
          <span style="color: #94a3b8;">http://localhost:5160/portal/SEU_TOKEN</span>
        </li>
        <li>
          <strong>Clique no Dropdown (‚ãÆ)</strong><br>
          <span style="color: #94a3b8;">No canto superior direito, ao lado do bot√£o "Instalar App"</span>
        </li>
        <li>
          <strong>Clique em "Criar Antes/Depois"</strong><br>
          <span style="color: #94a3b8;">Deve abrir um modal grande com 2 colunas de fotos</span>
        </li>
        <li>
          <strong>Selecione 2 Fotos</strong><br>
          <span style="color: #94a3b8;">Esquerda (ANTES) ‚Üí borda vermelha | Direita (DEPOIS) ‚Üí borda verde</span>
        </li>
        <li>
          <strong>Preencha os Campos</strong><br>
          <span style="color: #94a3b8;">T√≠tulo: "Minha Transforma√ß√£o" | Descri√ß√£o: (opcional)</span>
        </li>
        <li>
          <strong>Clique em "Criar Compara√ß√£o"</strong><br>
          <span style="color: #94a3b8;">Toast: "Compara√ß√£o salva!" ‚Üí Modal fecha ‚Üí Compara√ß√£o aparece</span>
        </li>
        <li>
          <strong>Verifique no Portal P√∫blico</strong><br>
          <span style="color: #94a3b8;">http://localhost:5160/public/portal/5511961454215</span>
        </li>
      </ol>
    </div>

    <!-- Resultado do Diagn√≥stico -->
    <div id="diagnostic-result" style="display: none;">
      <div class="status-card">
        <h2>üîç Resultado do Diagn√≥stico</h2>
        <div id="diagnostic-content"></div>
      </div>
    </div>
  </div>

  <script>
    // Verificar status do sistema ao carregar
    window.addEventListener('load', () => {
      checkSystemStatus();
    });

    function checkSystemStatus() {
      const statusDiv = document.getElementById('system-status');
      
      const checks = [
        {
          label: 'Tabela SQL',
          value: 'featured_photo_comparison',
          status: 'success',
          icon: '‚úÖ'
        },
        {
          label: 'Hook de Dados',
          value: 'use-featured-comparison.ts',
          status: 'success',
          icon: '‚úÖ'
        },
        {
          label: 'Componente Visual',
          value: 'FeaturedComparison.tsx',
          status: 'success',
          icon: '‚úÖ'
        },
        {
          label: 'Modal de Cria√ß√£o',
          value: 'CreateFeaturedComparisonModal.tsx',
          status: 'success',
          icon: '‚úÖ'
        },
        {
          label: 'Integra√ß√£o Portal Privado',
          value: 'PatientPortal.tsx',
          status: 'success',
          icon: '‚úÖ'
        },
        {
          label: 'Integra√ß√£o Portal P√∫blico',
          value: 'PublicPortal.tsx',
          status: 'success',
          icon: '‚úÖ'
        },
        {
          label: 'Compara√ß√µes Criadas',
          value: '0 (aguardando cria√ß√£o)',
          status: 'warning',
          icon: '‚ö†Ô∏è'
        }
      ];

      statusDiv.innerHTML = checks.map(check => `
        <div class="status-item">
          <div class="status-icon ${check.status}">${check.icon}</div>
          <div class="status-text">
            <div class="status-label">${check.label}</div>
            <div class="status-value">${check.value}</div>
          </div>
        </div>
      `).join('');
    }

    function runDiagnostic() {
      const resultDiv = document.getElementById('diagnostic-result');
      const contentDiv = document.getElementById('diagnostic-content');
      
      resultDiv.style.display = 'block';
      contentDiv.innerHTML = `
        <div class="alert alert-info">
          <strong>‚ÑπÔ∏è Diagn√≥stico Completo</strong><br>
          O sistema est√° 100% implementado e funcionando!
        </div>
        
        <div class="alert alert-warning">
          <strong>‚ö†Ô∏è A√ß√£o Necess√°ria</strong><br>
          Voc√™ precisa criar a primeira compara√ß√£o no portal privado.
        </div>
        
        <div class="code-block">
-- Execute este SQL no Supabase para verificar:
SELECT COUNT(*) as total FROM featured_photo_comparison;

-- Resultado esperado AGORA: 0
-- Resultado esperado DEPOIS de criar: 1 ou mais
        </div>
        
        <div class="alert alert-success">
          <strong>‚úÖ Pr√≥ximo Passo</strong><br>
          Siga as instru√ß√µes acima para criar sua primeira compara√ß√£o!
        </div>
      `;
      
      resultDiv.scrollIntoView({ behavior: 'smooth' });
    }

    function openPrivatePortal() {
      const token = prompt('Digite o token do portal privado:');
      if (token) {
        window.open(`http://localhost:5160/portal/${token}`, '_blank');
      }
    }

    function openPublicPortal() {
      const telefone = prompt('Digite o telefone (ex: 5511961454215):', '5511961454215');
      if (telefone) {
        window.open(`http://localhost:5160/public/portal/${telefone}`, '_blank');
      }
    }

    function checkDatabase() {
      alert(`
üìä VERIFICAR NO BANCO DE DADOS

Execute este SQL no Supabase SQL Editor:

SELECT * FROM featured_photo_comparison;

Resultado esperado AGORA:
(0 linhas)

Resultado esperado DEPOIS de criar:
id | telefone | title | is_visible | ...
1  | 5511... | Minha... | true | ...
      `);
    }
  </script>
</body>
</html>
