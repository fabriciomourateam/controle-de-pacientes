<!DOCTYPE html>
<html>
<head>
    <title>Debug N8N</title>
</head>
<body>
    <h1>Debug N8N</h1>
    <button onclick="debug1()">1. Testar Endpoint</button>
    <button onclick="debug2()">2. Processar Dados</button>
    <button onclick="debug3()">3. Verificar localStorage</button>
    <div id="log"></div>

    <script>
        function log(msg) {
            document.getElementById('log').innerHTML += '<br>' + msg;
        }

        function debug1() {
            log('üîÑ Testando endpoint...');
            fetch('https://painel-fmteam.vercel.app/api/get-n8n-data')
                .then(response => response.json())
                .then(data => {
                    log('‚úÖ Endpoint OK: ' + JSON.stringify(data).substring(0, 100) + '...');
                })
                .catch(error => {
                    log('‚ùå Erro: ' + error.message);
                });
        }

        function debug2() {
            log('üîÑ Processando dados...');
            fetch('https://painel-fmteam.vercel.app/api/get-n8n-data')
                .then(response => response.json())
                .then(data => {
                    if (data.data) {
                        // Simular processamento simples
                        const mockData = {
                            dailyLeads: [{ date: '2025-10-04', total: 50 }],
                            dailyCalls: [{ date: '2025-10-04', scheduled: 25 }],
                            monthlyLeads: { current: 1500 },
                            monthlyCalls: { current: 750 },
                            totalLeads: 50,
                            totalCalls: 25,
                            conversionRate: 50,
                            lastUpdated: new Date().toISOString()
                        };
                        
                        localStorage.setItem('n8n_metrics_data', JSON.stringify(mockData));
                        log('‚úÖ Dados processados e salvos!');
                    } else {
                        log('‚ùå Dados inv√°lidos');
                    }
                })
                .catch(error => {
                    log('‚ùå Erro: ' + error.message);
                });
        }

        function debug3() {
            log('üîÑ Verificando localStorage...');
            const dados = localStorage.getItem('n8n_metrics_data');
            if (dados) {
                const parsed = JSON.parse(dados);
                log('‚úÖ Dados encontrados: ' + JSON.stringify(parsed));
            } else {
                log('‚ùå Nenhum dado encontrado');
            }
        }
    </script>
</body>
</html>


